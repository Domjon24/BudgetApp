"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _utitilies=require("../../../../../../dev-tests/viz/utitilies");var _index=_interopRequireDefault(require("../../../../../../packages/fusioncharts/core/index"));var _scrollline2d=_interopRequireDefault(require("../../../../../../packages/fusioncharts/viz/scrollline2d"));_index.default.addDep(_scrollline2d.default);describe("Support - 2316 - scrollTo method is resetting when setJSONData or setChartData is used & the scroll bar position is not updated",(function(){var chartObj,scrollPosition,dataSource={chart:{numvisibleplot:"2",animation:"0"},categories:[{category:[{label:"Jan"},{label:"Feb"},{label:"Mar"}]}],dataset:[{seriesname:"2006",data:[{value:"10"},{value:"20"},{value:"10"}]}]},chartData={type:"scrollline2d",renderAt:_utitilies.CONTAINER_ID,dataSource:dataSource,events:{scrollEnd:function scrollEnd(e){scrollPosition=e.data.scrollPosition;console.log(e.data)}}};beforeEach((function(){chartObj=(0,_utitilies.setup)(_index.default,chartData)}));afterEach((function(){chartObj&&!chartObj.disposed&&chartObj.dispose()}));it("scroll position should remains same after the setJSONData is invoked",(function(done){chartObj.addEventListener("renderComplete",(function(){var children=chartObj.apiInstance.getChildren(),scrollbar=children.scrollBar[0],scrollAnchor=scrollbar&&scrollbar.getChildren("scrollAnchor")[0];chartObj.scrollTo(.5);setTimeout((function(){chartObj.setJSONData(dataSource);chartObj.scrollTo(scrollPosition)}),300);setTimeout((function(){children=chartObj.apiInstance.getChildren();scrollbar=children.scrollBar[0];scrollAnchor=scrollbar&&scrollbar.getChildren("scrollAnchor")[0];expect(scrollAnchor.config.scrollPosition).toBe(scrollPosition);done()}),500)}));chartObj.render()}));it("test for scroll function",(function(done){chartObj.addEventListener("renderComplete",(function(){var children=chartObj.apiInstance.getChildren(),scrollbar=children.scrollBar[0],scrollAnchor=scrollbar&&scrollbar.getChildren("scrollAnchor")[0],position=.81;scrollAnchor.scrollTo(position);expect(scrollbar.config.scrollPosition).toBe(position);done()}))}))}));