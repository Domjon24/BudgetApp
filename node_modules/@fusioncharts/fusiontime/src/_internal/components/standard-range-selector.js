"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=true;exports.default=void 0;var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));var _inheritsLoose2=_interopRequireDefault(require("@babel/runtime/helpers/inheritsLoose"));var _componentInterface=require("@fusioncharts/core/src/component-interface");var _srsTool=_interopRequireDefault(require("./srs-tool"));var _tools=require("@fusioncharts/core/src/toolbox/tools");var _lib=require("@fusioncharts/core/src/lib");var _utc=require("@fusioncharts/utils/src/time-intervals/utc");var _timeIntervals=require("@fusioncharts/utils/src/time-intervals");var _smartToolbar=_interopRequireDefault(require("./smart-toolbar"));var _clipUtils=require("@fusioncharts/utils/src/clip-utils");var _language_maps=require("@fusioncharts/utils/src/language_maps");var _src=_interopRequireDefault(require("ramda/src"));var UNDEF,intervalMap=_language_maps.intervalMapEn;var LABEL_FONT_SIZE="12px",PRESSED="pressed",ACTIVATED="activated",DURATION_YEAR=31536e6,DURATION_MONTH=26784e5,DURATION_DAY=864e5,DURATION_HOUR=36e5,COLOR_9E9E9E="#9e9e9e",COLOR_DFDFDF="#dfdfdf",TOOL_PADDING=3,DEFAULT_SEPARATOR_HEIGHT=16,standardIntervals=[DURATION_YEAR*10,DURATION_YEAR*5,DURATION_YEAR*3,DURATION_YEAR*2,DURATION_YEAR,6*DURATION_MONTH,3*DURATION_MONTH,DURATION_MONTH,15*DURATION_DAY,7*DURATION_DAY,DURATION_DAY,12*DURATION_HOUR,6*DURATION_HOUR,3*DURATION_HOUR,DURATION_HOUR,DURATION_HOUR/2],ENGLISH="english",GERMAN="german",FRENCH="french",SPANISH="spanish",PORTUGUESE="portuguese",ITALIAN="italian",LANGUAGE="language",ALL="All",getChartLang=function getChartLang(context){return context.getFromEnv(LANGUAGE)?context.getFromEnv(LANGUAGE).toLowerCase():ENGLISH},isLeapYear=function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0},leapYearCount=function leapYearCount(start,end){var startDate=new Date(start),endDate=new Date(end);var startYear=startDate.getFullYear(),endYear=endDate.getFullYear(),startMonth=startDate.getMonth(),endMonth=endDate.getMonth(),endDay=endDate.getDate(),count=0,currYear;if(startMonth>1)startYear++;if(endMonth===0||endMonth===1&&endDay<29)endYear--;currYear=startYear;while(currYear<=endYear){if(isLeapYear(currYear))count++;currYear++}return count},isValidInterVal=function isValidInterVal(index,rangeThreshold,minBin,isBusinessButton,endDomain){if(isBusinessButton===void 0){isBusinessButton=false}var standardRangeSelector=this,lang=this.config.language,interval=getInterVal(intervalMap[index].unit,standardRangeSelector.getFromEnv("UTC"),lang),minBinDuration=minBin[2]*3;intervalMap=getIntervalMap(lang);if(!isBusinessButton?standardIntervals[index]>=rangeThreshold[2]&&standardIntervals[index]>=minBinDuration:endDomain-interval.every(intervalMap[index].multiplier).floor(endDomain)>=minBinDuration){return true}return false},getInterVal=function getInterVal(unitF,isUTC,language){if(language===void 0){language=ENGLISH}var unit=unitF,unitIndex;if(language in _language_maps.timeUnitsMap){var _timeUnitsMap$english;unitIndex=_language_maps.timeUnitsMap[language].findIndex((function(u){return u===unit}));unit=unitIndex!==-1?(_timeUnitsMap$english=_language_maps.timeUnitsMap==null?void 0:_language_maps.timeUnitsMap.english[unitIndex])!=null?_timeUnitsMap$english:unit:unit}switch(unit){case"year":return isUTC?_utc.utcYear:_timeIntervals.timeYear;case"quarter":return isUTC?_utc.utcQuarter:_timeIntervals.timeQuarter;case"month":return isUTC?_utc.utcMonth:_timeIntervals.timeMonth;case"week":return isUTC?_utc.utcWeek:_timeIntervals.timeWeek;case"day":return isUTC?_utc.utcDay:_timeIntervals.timeDay;case"hour":return isUTC?_utc.utcHour:_timeIntervals.timeHour;case"minute":return isUTC?_utc.utcMinute:_timeIntervals.timeMinute;case"second":return isUTC?_utc.utcSecond:_timeIntervals.timeSecond}},findRelaventFontSize=function findRelaventFontSize(style){var normalFontSize=style.activated.config.normal["font-size"]||0,hoverFontSize=style.activated.config.hover["font-size"]||0,activeFontSize=style.pressed.config.normal["font-size"]||0;return Math.max(parseFloat(normalFontSize),parseFloat(hoverFontSize),parseFloat(activeFontSize))+"px"},getIntervalMap=function getIntervalMap(language){var tempIntervalMap={};switch(language){case ENGLISH:tempIntervalMap=_language_maps.intervalMapEn;break;case GERMAN:tempIntervalMap=_language_maps.intervalMapDe;break;case FRENCH:tempIntervalMap=_language_maps.intervalMapFr;break;case SPANISH:tempIntervalMap=_language_maps.intervalMapEs;break;case PORTUGUESE:tempIntervalMap=_language_maps.intervalMapPt;break;case ITALIAN:tempIntervalMap=_language_maps.intervalMapIt;break;default:tempIntervalMap=_language_maps.intervalMapEn}return tempIntervalMap};var StandardRangeSelector=function(_SmartRenderer){(0,_inheritsLoose2.default)(StandardRangeSelector,_SmartRenderer);function StandardRangeSelector(){var _this;_this=_SmartRenderer.call(this)||this;var standardRangeSelector=(0,_assertThisInitialized2.default)(_this);_this._handler=function(){var tool=this,chart=tool.getFromEnv("chart"),xScale=chart.getFromEnv("focusScalesX")[0],_xScale$applicableCli=xScale.applicableClippings,repeatClips=_xScale$applicableCli.repeatClips,singleClips=_xScale$applicableCli.singleClips,toolConfig=tool.config,multiplier=toolConfig.multiplier,isUTC=tool.getFromEnv("UTC"),unit=toolConfig.unit,fixedAtEnd=toolConfig.fixedAtEnd,fixedAtStart=toolConfig.fixedAtStart,text=toolConfig.text,interval,startDomain,endDomain,currentDomain=chart.getFocusLimit(),actualTotalDomain=chart.getContextLimit(),lang=getChartLang(this);standardRangeSelector.config.clickedButtonDetails=toolConfig;tool.getFromEnv("animationManager").setAnimationState("selectedRange");if(fixedAtEnd){endDomain=actualTotalDomain[1]}else{endDomain=currentDomain[1]}if(unit&&multiplier){interval=getInterVal(unit,isUTC,lang);if(!fixedAtEnd){startDomain=interval.offset(endDomain,-multiplier)}else{startDomain=interval.every(multiplier).floor(endDomain)}}else if(fixedAtStart){startDomain=actualTotalDomain[0]}if(+startDomain<actualTotalDomain[0]){endDomain=interval.offset(actualTotalDomain[0],multiplier)}standardRangeSelector.config.lastSelectedButtonConfig={fixedAtEnd:toolConfig.fixedAtEnd,fixedAtStart:toolConfig.fixedAtStart,unit:toolConfig.unit,multiplier:toolConfig.multiplier};standardRangeSelector.config.updatedThroughButton=true;startDomain=(0,_clipUtils.getUnclippedValue)(startDomain,repeatClips,singleClips,{clampDirection:"up"});endDomain=(0,_clipUtils.getUnclippedValue)(endDomain,repeatClips,singleClips,{clampDirection:"down"});chart.setFocusLimit([startDomain,endDomain]);chart.fireChartInstanceEvent("standardRangeSelect",{unit:unit,multiplier:multiplier,text:text})};_this._toolbars={};return _this}var _proto=StandardRangeSelector.prototype;_proto.__setDefaultConfig=function __setDefaultConfig(){_SmartRenderer.prototype.__setDefaultConfig.call(this);var config=this.config;config.lastSelectedButtonConfig=UNDEF;config.clickedButtonDetails={};config.labelFontSize=LABEL_FONT_SIZE;config.takeMaxSize=false;config.defaultStateStyle={activated:{config:{normal:{fill:COLOR_9E9E9E,stroke:"none","stroke-width":2,cursor:"pointer","stroke-opacity":1,"fill-opacity":1,opacity:"1","font-weight":400,"font-size":"12","line-height":14.4,"text-anchor":"middle"},hover:{fill:"#5648D4",stroke:"none","stroke-width":2,cursor:"pointer","stroke-opacity":1,"fill-opacity":1,opacity:"1","font-weight":400,"font-size":"12","line-height":14.4,"text-anchor":"middle"},normalBackground:{fill:"none","fill-opacity":1,stroke:"none",cursor:"pointer",r:"2px","stroke-width":"1","stroke-dasharray":"none","stroke-opacity":"1",opacity:1},hoverBackground:{fill:"none","fill-opacity":1,stroke:"none",cursor:"pointer",r:"2px","stroke-width":"1","stroke-dasharray":"none","stroke-opacity":"1",opacity:1}}},pressed:{config:{normal:{fill:"#5648D4","stroke-width":2,stroke:"none","symbol-stroke":"#343434",cursor:"pointer","fill-opacity":1,"stroke-opacity":1,opacity:"1","font-weight":400,"font-size":"12","line-height":14.4,"text-anchor":"middle"},hover:{fill:"#5648D4","stroke-width":2,stroke:"none","symbol-stroke":"#5648D4",cursor:"pointer","fill-opacity":1,"stroke-opacity":1,opacity:"1","font-weight":400,"font-size":"12","line-height":14.4,"text-anchor":"middle"},normalBackground:{fill:"none","fill-opacity":1,stroke:"none",cursor:"pointer",r:"2px","stroke-width":"1","stroke-dasharray":"none","stroke-opacity":"1",opacity:1},hoverBackground:{fill:"none","fill-opacity":1,stroke:"none",cursor:"pointer",r:"2px","stroke-width":"1","stroke-dasharray":"none","stroke-opacity":"1",opacity:1}}}};config.stateStyle={}};_proto.configureAttributes=function configureAttributes(obj){_SmartRenderer.prototype.configureAttributes.call(this,obj);var srs=this,config=srs.config,getStyleDef=srs.getFromEnv("getStyleDef"),baseTextStyle=srs.getFromEnv("baseTextStyle"),textStyleNormal,textStyleHover,textStyleActive,backgroundStyleNormal,backgroundStyleHover,backgroundStyleActive,userStyle,userGivenStyle;config.contextRangeThreshold=srs.getFromEnv("contextBins")[0].getRangeThreshold();config.focusRangeThreshold=srs.getFromEnv("focusBins")[0].getRangeThreshold();config.contextMinBin=srs.getFromEnv("contextBins")[0].getBinMin();config.focusMinBin=srs.getFromEnv("focusBins")[0].getBinMin();config.language=getChartLang(this);Object.assign(config,obj);userStyle=config.style;textStyleNormal=Object.assign({},baseTextStyle,getStyleDef(userStyle["button-text"]));textStyleHover=Object.assign({},baseTextStyle,getStyleDef(userStyle["button-text:hover"]));textStyleActive=Object.assign({},baseTextStyle,getStyleDef(userStyle["button-text:active"]));backgroundStyleNormal=getStyleDef(userStyle["button-background"]);backgroundStyleHover=getStyleDef(userStyle["button-background:hover"]);backgroundStyleActive=getStyleDef(userStyle["button-background:active"]);if(backgroundStyleNormal.fill||backgroundStyleNormal.stroke){config.takeMaxSize=true}userGivenStyle={activated:{config:{normal:textStyleNormal,hover:Object.assign({},textStyleNormal,textStyleHover),normalBackground:backgroundStyleNormal,hoverBackground:Object.assign({},backgroundStyleNormal,backgroundStyleHover)}},pressed:{config:{normal:Object.assign({},textStyleNormal,textStyleActive),hover:Object.assign({},textStyleNormal,textStyleActive,textStyleHover),normalBackground:Object.assign({},backgroundStyleNormal,backgroundStyleActive),hoverBackground:Object.assign({},backgroundStyleNormal,backgroundStyleActive,backgroundStyleHover)}}};config.stateStyle=(0,_lib.extend2)((0,_lib.extend2)({},config.defaultStateStyle),userGivenStyle);config.stateStyle.separator=getStyleDef(userStyle.separator&&userStyle.separator)};_proto.areTillDateButtonsPossible=function areTillDateButtonsPossible(){var isUTC=this.getFromEnv("UTC"),dateAPI=this.getFromEnv("dateAPI"),currentDate=new Date,endDomain=this.getFromEnv("chart").getContextLimit()[1],availableLastDate=new Date(endDomain);return dateAPI(availableLastDate,"FullYear",isUTC)===dateAPI(currentDate,"FullYear",isUTC)&&dateAPI(availableLastDate,"Month",isUTC)===dateAPI(currentDate,"Month",isUTC)&&dateAPI(availableLastDate,"Date",isUTC)===dateAPI(currentDate,"Date",isUTC)};_proto.getTillDateButtons=function getTillDateButtons(duration,rangeThreshold,minBin){var tillDateObjArr=[],tillDateObj,endDomain=this.getFromEnv("chart").getContextLimit()[1],i,len;if(this.areTillDateButtonsPossible()){for(i=0,len=standardIntervals.length;i<len;i++){if(duration>=standardIntervals[i]&&intervalMap[i].tilldateName&&isValidInterVal.call(this,i,rangeThreshold,minBin,true,endDomain)){tillDateObj=(0,_lib.extend2)({},intervalMap[i]);tillDateObj.fixedAtEnd=true;tillDateObj.fixedAtStart=false;tillDateObjArr.push(tillDateObj)}}}return tillDateObjArr};_proto.getSelectionButtonConfig=function getSelectionButtonConfig(){var standardRangeSelector=this,selfConfig=standardRangeSelector.config,timeInterValMonth,timeInterValYear,timeInterValDay,isUTC=standardRangeSelector.getFromEnv("UTC"),currentDomain=selfConfig.currentDomain,returnObj={},totalDomain=selfConfig.totalDomain,currentDomainDiff=+currentDomain[1]-+currentDomain[0];timeInterValYear=!isUTC?_timeIntervals.timeYear:_utc.utcYear;timeInterValMonth=!isUTC?_timeIntervals.timeMonth:_utc.utcMonth;timeInterValDay=!isUTC?_timeIntervals.timeDay:_utc.utcDay;if(selfConfig.lastSelectedButtonConfig){returnObj={isTillDate:selfConfig.lastSelectedButtonConfig.fixedAtEnd&&!selfConfig.lastSelectedButtonConfig.fixedAtStart,isAllButton:selfConfig.lastSelectedButtonConfig.fixedAtEnd&&selfConfig.lastSelectedButtonConfig.fixedAtStart,isIntervalButton:!selfConfig.lastSelectedButtonConfig.fixedAtEnd&&!selfConfig.lastSelectedButtonConfig.fixedAtStart,multiplier:selfConfig.lastSelectedButtonConfig.multiplier,unit:selfConfig.lastSelectedButtonConfig.unit};return returnObj}if(currentDomainDiff===+totalDomain[1]-+totalDomain[0]){return{isAllButton:true}}if(this.areTillDateButtonsPossible()){if(currentDomainDiff===+currentDomain[1]-+timeInterValYear.floor(currentDomain[1])){return{isTillDate:true,multiplier:"1",unit:"year"}}if(currentDomainDiff===+currentDomain[1]-+timeInterValMonth.floor(currentDomain[1])){return{isTillDate:true,multiplier:"1",unit:"month"}}if(currentDomainDiff===+currentDomain[1]-+timeInterValMonth.every(3).floor(currentDomain[1])){return{isTillDate:true,multiplier:"3",unit:"month"}}if(currentDomainDiff===+currentDomain[1]-+timeInterValDay.every(7).floor(currentDomain[1])){return{isTillDate:true,multiplier:"7",unit:"day"}}}return standardRangeSelector.getHighlightedIntervalButton(currentDomainDiff)};_proto.getIntervalButtons=function getIntervalButtons(currentDomainDuration,totalDomainDuration,rangeThreshold,minBin,numberOfLeapDays){var standardLeapYearIntervals=[];var i,len=standardIntervals.length,intervalArr=[],additionDays=[];if(numberOfLeapDays>0){for(i=0;i<5;i++){var res=Math.min(numberOfLeapDays,1+Math.floor(Number(intervalMap[i].multiplier)/4));additionDays[i]=res;standardLeapYearIntervals.push(DURATION_YEAR*intervalMap[i].multiplier+additionDays[i]*DURATION_DAY)}}for(i=len-1;i>0;i--){if(numberOfLeapDays>0&&i<5&&standardLeapYearIntervals[i]>=currentDomainDuration){break}else if(standardIntervals[i]>=currentDomainDuration){break}}if(currentDomainDuration){if(i<=0){(numberOfLeapDays>0?standardLeapYearIntervals[0]<=totalDomainDuration:standardIntervals[0]<=totalDomainDuration)&&isValidInterVal.call(this,0,rangeThreshold,minBin)&&intervalArr.push(intervalMap[0]);(numberOfLeapDays>1?standardLeapYearIntervals[1]<=totalDomainDuration:standardIntervals[1]<=totalDomainDuration)&&isValidInterVal.call(this,1,rangeThreshold,minBin)&&intervalArr.push(intervalMap[1])}else if(i===len-1){standardIntervals[i-1]<=totalDomainDuration&&isValidInterVal.call(this,i-1,rangeThreshold,minBin)&&intervalArr.push(intervalMap[i-1]);standardIntervals[i]<=totalDomainDuration&&isValidInterVal.call(this,i,rangeThreshold,minBin)&&intervalArr.push(intervalMap[i])}else{(numberOfLeapDays>0&&i<5?standardLeapYearIntervals[i-1]<=totalDomainDuration:standardIntervals[i-1]<=totalDomainDuration)&&isValidInterVal.call(this,i-1,rangeThreshold,minBin)&&intervalArr.push(intervalMap[i-1]);(numberOfLeapDays>0&&i<5?standardLeapYearIntervals[i]<=totalDomainDuration:standardIntervals[i]<=totalDomainDuration)&&isValidInterVal.call(this,i,rangeThreshold,minBin)&&intervalArr.push(intervalMap[i]);standardIntervals[i+1]<=totalDomainDuration&&isValidInterVal.call(this,i+1,rangeThreshold,minBin)&&intervalArr.push(intervalMap[i+1])}}return intervalArr};_proto.getHighlightedIntervalButton=function getHighlightedIntervalButton(duration){var srs=this,selfConfig=srs.config,lang=selfConfig.language,i,intervalButtons=selfConfig.intervalButtons,currentDomain=selfConfig.currentDomain,isUTC=srs.getFromEnv("UTC"),interval,len=intervalButtons.length,returnObj={};for(i=len-1;i>=0;i--){interval=getInterVal(intervalButtons[i].unit,isUTC,lang);if(+currentDomain[1]===+interval.offset(currentDomain[0],intervalButtons[i].multiplier)){break}}if(i!==-1){returnObj=(0,_lib.extend2)({isIntervalButton:true},intervalMap[i]);returnObj={isIntervalButton:true,unit:intervalButtons[i].unit,multiplier:intervalButtons[i].multiplier};selfConfig.lastSelectedButtonConfig=returnObj}return returnObj};_proto.getToolInfo=function getToolInfo(){var srs=this,srsConfig=srs.config,lang=srsConfig.language,chart=srs.getFromEnv("chart"),toolBar=srs.getFromEnv("selectorToolbar"),retObj={},i,len,state,smartLabel=srs.getFromEnv("smartLabel"),allTextSize,stateStyleObj=srsConfig.stateStyle,labelFontSize=findRelaventFontSize(stateStyleObj)||srsConfig.labelFontSize,labelFontFamily=stateStyleObj.activated.config.normal["font-family"],labelFontWeight=stateStyleObj.activated.config.normal["font-weight"],currentDomain=srsConfig.currentDomain,totalDomain=chart.getContextLimit(),contextRangeThreshold=srsConfig.contextRangeThreshold,focusRangeThreshold=srsConfig.focusRangeThreshold,contextMinBin=srsConfig.contextMinBin,focusMinBin=srsConfig.focusMinBin,selectedButtonConfig,maxHeight=0,maxWidth=0,takeMaxSize=srsConfig.takeMaxSize,currentDomainDiff=+currentDomain[1]-+currentDomain[0],numberOfLeapDays=leapYearCount(+currentDomain[0],+currentDomain[1]),totalDomainDiff=+totalDomain[1]-+totalDomain[0],intervalToolbarId="intervalToolBar-"+toolBar.getId()+"-"+chart.getId(),businessToolbarId="businessToolBar-"+toolBar.getId()+"-"+chart.getId(),allToolbarId="allToolBar-"+toolBar.getId()+"-"+chart.getId(),intervalButtons=srsConfig.intervalButtons=srs.getIntervalButtons(currentDomainDiff,totalDomainDiff,focusRangeThreshold,focusMinBin,numberOfLeapDays),tillDateButtons=srsConfig.tillDateButtons=srs.getTillDateButtons(totalDomainDiff,contextRangeThreshold,contextMinBin),allButtonText;smartLabel.setStyle({fontSize:labelFontSize,fontFamily:labelFontFamily,fontWeight:labelFontWeight});intervalButtons.forEach((function(info){var _smartLabel$getOriSiz=smartLabel.getOriSize(info.intervalName,false),height=_smartLabel$getOriSiz.height,width=_smartLabel$getOriSiz.width;info.height=height;info.width=width;maxHeight=Math.max(height,maxHeight);maxWidth=Math.max(width,maxWidth)}));tillDateButtons.forEach((function(info){var _smartLabel$getOriSiz2=smartLabel.getOriSize(info.tilldateName,false),height=_smartLabel$getOriSiz2.height,width=_smartLabel$getOriSiz2.width;info.height=height;info.width=width;maxHeight=Math.max(height,maxHeight);maxWidth=Math.max(width,maxWidth)}));allButtonText=_src.default.propOr(ALL,lang,_language_maps.allButtonMap);allTextSize=smartLabel.getOriSize(allButtonText,false);maxHeight=Math.max(allTextSize.height,maxHeight);maxWidth=Math.max(allTextSize.width,maxWidth);selectedButtonConfig=srs.getSelectionButtonConfig();retObj[intervalToolbarId]={type:"tool",def:_smartToolbar.default,configuration:{hAlign:"left",toolbarhdirection:1,child:{}}};for(i=0,len=intervalButtons.length;i<len;i++){if(selectedButtonConfig.isIntervalButton&&selectedButtonConfig.unit===intervalButtons[i].unit&&selectedButtonConfig.multiplier===intervalButtons[i].multiplier){state=PRESSED}else{state=ACTIVATED}retObj[intervalToolbarId].configuration.child["intervalButton-"+toolBar.getId()+"-"+chart.getId()+"-"+i]={type:"tool",def:_srsTool.default,configuration:{text:intervalButtons[i].intervalName,name:"interval",width:takeMaxSize?maxWidth:intervalButtons[i].width,height:takeMaxSize?maxHeight:intervalButtons[i].height,scale:1,marginLeft:i?TOOL_PADDING:0,marginRight:i===len-1?0:TOOL_PADDING,hAlign:"left",symbolStrokeWidth:"2",hoveredState:"normal",state:state,multiplier:intervalButtons[i].multiplier,unit:intervalButtons[i].unit,strokeWidth:0,listener:{"fc-click":srs._handler},css:stateStyleObj}}}if(len){retObj["separator-"+toolBar.getId()+"-"+chart.getId()+"-0"]={type:"tool",def:_tools.Separator,configuration:{marginLeft:0,marginRight:0,scale:1,height:maxHeight<DEFAULT_SEPARATOR_HEIGHT?DEFAULT_SEPARATOR_HEIGHT:maxHeight,width:8,hAlign:"left",stroke:stateStyleObj.separator.stroke||COLOR_DFDFDF,css:stateStyleObj.separator}}}len=tillDateButtons.length;if(len){retObj[businessToolbarId]={type:"tool",def:_smartToolbar.default,configuration:{hAlign:"left",toolbarhdirection:1,child:{}}};for(i=0;i<len;i++){if(selectedButtonConfig.isTillDate&&selectedButtonConfig.unit===tillDateButtons[i].unit&&selectedButtonConfig.multiplier===tillDateButtons[i].multiplier&&+currentDomain[1]===+totalDomain[1]){state=PRESSED}else{state=ACTIVATED}retObj[businessToolbarId].configuration.child["tillDateButton-"+toolBar.getId()+"-"+chart.getId()+"-"+i]={type:"tool",def:_srsTool.default,configuration:{text:tillDateButtons[i].tilldateName,name:"interval",scale:1,width:takeMaxSize?maxWidth:tillDateButtons[i].width,height:takeMaxSize?maxHeight:tillDateButtons[i].height,state:state,multiplier:tillDateButtons[i].multiplier,unit:tillDateButtons[i].unit,symbolStrokeWidth:"2",hoveredState:"normal",fixedAtStart:tillDateButtons[i].fixedAtStart,fixedAtEnd:tillDateButtons[i].fixedAtEnd,marginLeft:i?TOOL_PADDING:0,marginRight:i===len-1?0:TOOL_PADDING,hAlign:"left",strokeWidth:0,listener:{"fc-click":srs._handler},css:stateStyleObj}}}retObj["separator-"+toolBar.getId()+"-"+chart.getId()+"-1"]={type:"tool",def:_tools.Separator,configuration:{marginLeft:0,marginRight:0,scale:1,height:maxHeight<DEFAULT_SEPARATOR_HEIGHT?DEFAULT_SEPARATOR_HEIGHT:maxHeight,classIndex:3,itemIndex:0,width:8,hAlign:"left",stroke:stateStyleObj.separator.stroke||COLOR_DFDFDF,css:stateStyleObj.separator}}}if(selectedButtonConfig.isAllButton){state=PRESSED}else{state=ACTIVATED}retObj[allToolbarId]={type:"tool",def:_smartToolbar.default,configuration:{hAlign:"left",toolbarhdirection:1,child:{}}};retObj[allToolbarId].configuration.child["allButton-"+toolBar.getId()+"-"+chart.getId()+"-0"]={type:"tool",def:_srsTool.default,configuration:{state:state,width:takeMaxSize?maxWidth:allTextSize.width,height:takeMaxSize?maxHeight:allTextSize.height,scale:1,text:allButtonText,name:"interval",marginLeft:0,marginRight:0,hAlign:"left",hoveredState:"normal",symbolStrokeWidth:"2",strokeWidth:0,fixedAtStart:true,fixedAtEnd:true,fill:"#00ff00",labelFill:"#00ff00",symbolFill:"#00ff00",listener:{"fc-click":srs._handler},css:stateStyleObj}};return retObj};_proto.updateOnLimitChange=function updateOnLimitChange(){var standardRangeSelector=this,config=standardRangeSelector.config,chart=standardRangeSelector.getFromEnv("chart"),currentDomain=chart.getFocusLimit()||[0,1],currentDomainDiff=currentDomain[1]-currentDomain[0];if(config.lastSelectedRange&&config.lastSelectedRange!==currentDomainDiff&&!config.updatedThroughButton){config.lastSelectedButtonConfig=UNDEF}config.lastSelectedRange=currentDomainDiff;config.updatedThroughButton=false;standardRangeSelector.setData({currentDomain:currentDomain,totalDomain:chart.getContextLimit()||[0,1]},true)};return StandardRangeSelector}(_componentInterface.SmartRenderer);var _default=StandardRangeSelector;exports.default=_default;