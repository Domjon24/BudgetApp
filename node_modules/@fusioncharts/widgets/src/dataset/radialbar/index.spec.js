"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _index=_interopRequireDefault(require("../../../../../packages/fusioncharts/core/index"));var _radialbar=_interopRequireDefault(require("../../../../../packages/fusioncharts/viz/radialbar"));var _ignoreCaseExt=_interopRequireDefault(require("../../../../../packages/fc-features/src/ignore-case-ext"));var _utitilies=require("../../../../../dev-tests/viz/utitilies");var _polarUtil=require("@fusioncharts/utils/src/scale-utils/polar-util");_index.default.addDep(_radialbar.default);_index.default.addDep(_ignoreCaseExt.default);describe("RadialBar Arc Test : Support : Radial bar value 67 overlap issue",(function(){var chartObj,dataSource={chart:{theme:"fusion",showLegend:0,innerRadius:60,outerRadius:195,showLabels:1,showValues:1,showToolTip:1,showContextLabel:1,defaultContextLabel:"<b>Chronic <br> Burnout</b>",contextLabelText:" ",contextLabelFontSize:"15px",contextLabelAlpha:"bold",contextLabelFontColor:"#a84644"},data:[{label:"Enthusiasm",value:79,color:"#00a39d"}]},chartData={type:"radialbar",id:"id1",renderAt:_utitilies.CONTAINER_ID,width:"600",height:"350",dataFormat:"json",dataSource:dataSource};beforeEach((function(){chartObj=(0,_utitilies.setup)(_index.default,chartData).render()}));afterEach((function(){chartObj&&!chartObj.disposed&&chartObj.dispose()}));it("should show proper position of arc in radialbar",(function(done){chartObj.addEventListener("renderComplete",(function(){var chartInstance=chartObj.apiInstance.getChildren(),plotCount=chartInstance.plot.length,chartPlot=chartInstance.plot,isArcDiscorted=false;for(var i=0;i<plotCount;i++){var configPath=chartPlot[i].config,startAngle=(0,_polarUtil.changeAngleBase)(configPath.startingAngle),endingAngle=(0,_polarUtil.changeAngleBase)(configPath.endingAngle),trackArc=(0,_polarUtil.findArc)(startAngle,startAngle===endingAngle?endingAngle-.1:endingAngle),endAngle=startAngle+Math.round((configPath.value>100?100:configPath.value)/100*trackArc),innerRadius=configPath.innerRadius,startRadius=parseInt(configPath.barstartradius,10)/100*(configPath.thickness/2),endRadius=parseInt(configPath.barendradius,10)/100*(configPath.thickness/2),arc=(0,_polarUtil.findArc)(startAngle,endAngle),_startAngle=startAngle,_endAngle=endAngle;if(startRadius>0&&arc!==360){_startAngle+=(0,_polarUtil.radiansInAngle)(startRadius,innerRadius+startRadius)}if(endRadius>0&&arc!==360){_endAngle-=(0,_polarUtil.radiansInAngle)(endRadius,innerRadius+endRadius)}startAngle=(0,_polarUtil.normaliseAngle)(_startAngle),endAngle=(0,_polarUtil.normaliseAngle)(_endAngle),arc=(0,_polarUtil.findArc)(startAngle,endAngle);if(arc<=180&&configPath.path_d[7]===1){isArcDiscorted=true;break}}expect(isArcDiscorted).toBeFalsy();done()}))}))}));